---
phase: 04-onboarding-automation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .github/ISSUE_TEMPLATE/plugin-request.yml
  - .github/PULL_REQUEST_TEMPLATE/plugin-submission.md
autonomous: true
verification_level: sanity

must_haves:
  truths:
    - "Plugin request issue template uses YAML form format with required fields (name, description, category)"
    - "PR template includes checklist covering validation, scoring, CI filter update, and documentation"
    - "Issue template has input validation (required fields) to prevent incomplete submissions"
    - "PR template references validate-local.sh for pre-submission checks"
  artifacts:
    - path: ".github/ISSUE_TEMPLATE/plugin-request.yml"
      provides: "YAML issue form for requesting new plugin additions"
      contains: "type: input"
    - path: ".github/PULL_REQUEST_TEMPLATE/plugin-submission.md"
      provides: "PR template with submission checklist for plugin PRs"
      contains: "validate-local.sh"
  key_links:
    - from: ".github/PULL_REQUEST_TEMPLATE/plugin-submission.md"
      to: "scripts/validate-local.sh"
      via: "documentation reference"
      pattern: "validate-local"
    - from: ".github/PULL_REQUEST_TEMPLATE/plugin-submission.md"
      to: ".github/workflows/validate-plugins.yml"
      via: "CI filter update reminder"
      pattern: "validate-plugins\\.yml"
---

<objective>
Create GitHub Issue and Pull Request templates for plugin submissions.

Purpose: These templates standardize the plugin submission flow. The Issue template lets anyone request a plugin be added (with structured YAML form fields). The PR template provides a checklist ensuring every plugin submission meets quality gates before review.

Output: `.github/ISSUE_TEMPLATE/plugin-request.yml` and `.github/PULL_REQUEST_TEMPLATE/plugin-submission.md`.
</objective>

<execution_context>
@${CLAUDE_PLUGIN_ROOT}/references/execute-plan.md
@${CLAUDE_PLUGIN_ROOT}/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-onboarding-automation/04-RESEARCH.md

# CI workflow for filter update reference
@.github/workflows/validate-plugins.yml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create YAML issue form for plugin requests</name>
  <files>.github/ISSUE_TEMPLATE/plugin-request.yml</files>
  <action>
    Create `.github/ISSUE_TEMPLATE/plugin-request.yml` — a YAML-based GitHub issue form (not Markdown).

    Per GitHub Docs "Syntax for issue forms", the file must have:

    Top-level fields:
    - `name`: "Plugin Request"
    - `description`: "Request a new plugin be added to the marketplace"
    - `title`: "[Plugin Request]: "
    - `labels`: ["plugin-request"]

    Body fields (in order):
    1. **Plugin Name** (`type: input`, required)
       - `id`: `plugin-name`
       - `label`: "Plugin Name"
       - `description`: "Lowercase identifier using only letters, digits, and hyphens (e.g., my-awesome-plugin). Must match pattern: ^[a-z][a-z0-9-]*$"
       - `placeholder`: "my-plugin"
       - Required: true

    2. **Description** (`type: textarea`, required)
       - `id`: `description`
       - `label`: "Description"
       - `description`: "What does this plugin do? Describe its purpose, key features, and target audience."
       - Required: true

    3. **Category** (`type: dropdown`, required)
       - `id`: `category`
       - `label`: "Category"
       - `description`: "Primary category for marketplace classification"
       - Options: development, productivity, testing, documentation, devops, research, other
       - Required: true

    4. **Source Repository** (`type: input`, optional)
       - `id`: `repository`
       - `label`: "Source Repository"
       - `description`: "URL of the plugin's git repository (if hosted externally)"
       - `placeholder`: "https://github.com/user/repo"
       - Required: false

    5. **Additional Context** (`type: textarea`, optional)
       - `id`: `additional-context`
       - `label`: "Additional Context"
       - `description`: "Any other information about the plugin (links, screenshots, prior art)"
       - Required: false

    6. **Checklist** (`type: checkboxes`, required)
       - `id`: `checklist`
       - `label`: "Submission Checklist"
       - Options:
         - "I have read the CONTRIBUTING.md guide" (required: true)
         - "The plugin name follows the naming convention (lowercase-hyphenated)"
         - "I am willing to maintain this plugin or have identified a maintainer"
  </action>
  <verify>
    Verify the file is valid YAML: `python3 -c "import yaml; yaml.safe_load(open('.github/ISSUE_TEMPLATE/plugin-request.yml'))"` or `yq . .github/ISSUE_TEMPLATE/plugin-request.yml` (Level 1: Sanity)
    Verify the file contains required YAML form keys: `name`, `description`, `body` at top level.
    Verify all required fields have `required: true` in their validations.
  </verify>
  <done>YAML issue form exists at .github/ISSUE_TEMPLATE/plugin-request.yml with 6 body fields, 3 required inputs, input validation, and checklist.</done>
</task>

<task type="auto">
  <name>Task 2: Create PR template for plugin submissions</name>
  <files>.github/PULL_REQUEST_TEMPLATE/plugin-submission.md</files>
  <action>
    Create `.github/PULL_REQUEST_TEMPLATE/plugin-submission.md` — a Markdown pull request template.

    Note: PR templates only support Markdown format (no YAML forms per GitHub docs).

    Structure the template with these sections:

    1. **Title guidance** (HTML comment at top):
       ```
       <!-- Title format: feat(plugin): add <plugin-name> -->
       ```

    2. **Summary section**:
       ```
       ## Summary
       <!-- Brief description of the plugin being added -->
       ```

    3. **Plugin Details section** (fill-in fields):
       ```
       ## Plugin Details
       - **Name:** <!-- lowercase-hyphenated, e.g., my-plugin -->
       - **Version:** <!-- semver, e.g., 1.0.0 -->
       - **Category:** <!-- development | productivity | testing | documentation | devops | research | other -->
       - **Author:** <!-- your name or org -->
       ```

    4. **Pre-submission Checklist** (checkbox list):
       ```
       ## Pre-submission Checklist
       - [ ] Plugin is in `plugins/<name>/` directory
       - [ ] `./scripts/validate-local.sh plugins/<name>` passes
       - [ ] Quality score is >= 40 (run `./scripts/score-plugin.sh plugins/<name>`)
       - [ ] `plugin.json` has all required fields (name, version, description, author)
       - [ ] README.md exists with >= 50 lines
       - [ ] CLAUDE.md exists with plugin-specific guidance
       - [ ] All paths declared in plugin.json point to existing files
       - [ ] No empty artifact directories (agents/, commands/, skills/)
       - [ ] Version matches VERSION file (if present)
       - [ ] CHANGELOG.md documents the current version
       ```

    5. **CI Note** (important callout):
       ```
       ## CI Configuration
       > **Important:** After merge, a maintainer must add a filter entry for your plugin
       > in `.github/workflows/validate-plugins.yml` under the `dorny/paths-filter` section.
       > See CONTRIBUTING.md for details.
       ```

    6. **Testing section**:
       ```
       ## Testing
       <!-- Describe how you tested the plugin locally -->
       - [ ] Ran `./scripts/validate-local.sh plugins/<name>`
       - [ ] Tested commands/agents manually in Claude Code
       ```
  </action>
  <verify>
    Verify file exists and is non-empty: `test -s .github/PULL_REQUEST_TEMPLATE/plugin-submission.md` (Level 1: Sanity)
    Verify file contains key checklist items: grep for "validate-local.sh", "quality score", "validate-plugins.yml".
    Verify file is valid Markdown (no syntax errors visible in raw content).
  </verify>
  <done>PR template exists at .github/PULL_REQUEST_TEMPLATE/plugin-submission.md with summary, plugin details, 10-item pre-submission checklist, CI configuration note, and testing section.</done>
</task>

</tasks>

<verification>
Level 1 (Sanity):
- `.github/ISSUE_TEMPLATE/plugin-request.yml` is valid YAML
- `.github/PULL_REQUEST_TEMPLATE/plugin-submission.md` exists and is non-empty
- Issue template has `type: input`, `type: textarea`, `type: dropdown`, `type: checkboxes` fields
- PR template references `validate-local.sh` and `validate-plugins.yml`

Level 2 (Proxy):
- Push to a test branch and verify templates render on GitHub (deferred to manual check)
- Issue form has proper `validations: required: true` on mandatory fields
</verification>

<success_criteria>
- YAML issue form provides structured input with required fields and validation
- PR template covers all quality gate requirements as a checklist
- PR template reminds submitters about the CI filter update requirement
- Both templates reference the correct script names and file paths
</success_criteria>

<output>
After completion, create `.planning/phases/04-onboarding-automation/04-02-SUMMARY.md`
</output>
