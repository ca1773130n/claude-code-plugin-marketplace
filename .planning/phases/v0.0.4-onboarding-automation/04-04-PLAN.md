---
phase: 04-onboarding-automation
plan: 04
type: execute
wave: 2
depends_on: ["04-01", "04-02", "04-03"]
files_modified:
  - CONTRIBUTING.md
autonomous: true
verification_level: sanity

must_haves:
  truths:
    - "CONTRIBUTING.md provides a complete step-by-step guide from zero to submitted PR"
    - "Guide references new-plugin.sh, validate-local.sh, and the PR template by correct paths"
    - "Guide documents the CI filter update requirement for validate-plugins.yml"
    - "Guide covers plugin naming conventions, directory structure, and quality scoring"
    - "Guide mentions skills/ as optional and explains the empty-directory deduction"
    - "Guide is actionable — a new contributor can follow it without prior knowledge of the repo"
  artifacts:
    - path: "CONTRIBUTING.md"
      provides: "Step-by-step contributor guide for plugin submissions"
      min_lines: 100
  key_links:
    - from: "CONTRIBUTING.md"
      to: "scripts/new-plugin.sh"
      via: "scaffolding instruction"
      pattern: "new-plugin\\.sh"
    - from: "CONTRIBUTING.md"
      to: "scripts/validate-local.sh"
      via: "validation instruction"
      pattern: "validate-local\\.sh"
    - from: "CONTRIBUTING.md"
      to: ".github/workflows/validate-plugins.yml"
      via: "CI filter documentation"
      pattern: "validate-plugins\\.yml"
    - from: "CONTRIBUTING.md"
      to: "QUALITY.md"
      via: "quality rubric reference"
      pattern: "QUALITY\\.md"
---

<objective>
Create CONTRIBUTING.md — the comprehensive contributor guide for plugin submissions.

Purpose: This is the single document a new contributor reads to go from zero to a submitted plugin PR. It ties together all Phase 4 artifacts (template, scaffolding script, validation wrapper, PR template) into a coherent onboarding flow. The guide must be self-contained enough that a contributor can follow it without asking questions.

Output: `CONTRIBUTING.md` in the repository root.
</objective>

<execution_context>
@${CLAUDE_PLUGIN_ROOT}/references/execute-plan.md
@${CLAUDE_PLUGIN_ROOT}/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-onboarding-automation/04-RESEARCH.md

# Prior plan summaries (needed for accurate tool references)
@.planning/phases/04-onboarding-automation/04-01-SUMMARY.md
@.planning/phases/04-onboarding-automation/04-02-SUMMARY.md
@.planning/phases/04-onboarding-automation/04-03-SUMMARY.md

# Quality rubric (referenced in guide)
@QUALITY.md

# Existing CI workflow (for filter documentation)
@.github/workflows/validate-plugins.yml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CONTRIBUTING.md contributor guide</name>
  <files>CONTRIBUTING.md</files>
  <action>
    Create `CONTRIBUTING.md` in the repository root. The guide must be >= 100 lines and cover the full onboarding flow.

    Structure (sections in order):

    **1. Header**
    ```markdown
    # Contributing to Claude Plugin Marketplace

    Thank you for your interest in contributing a plugin! This guide walks you through the process from start to finish.
    ```

    **2. Prerequisites**
    - Node.js 20+ and npm
    - jq (for JSON manipulation)
    - Git
    - `npm ci` to install validation dependencies

    **3. Quick Start (< 10 minutes)**
    Step-by-step numbered list:
    1. Fork and clone the repository
    2. Run `npm ci` to install dependencies
    3. Scaffold a new plugin: `./scripts/new-plugin.sh my-plugin`
    4. Customize the generated files (edit plugin.json, add commands/agents, update README)
    5. Validate locally: `./scripts/validate-local.sh plugins/my-plugin`
    6. Commit and push to your fork
    7. Open a PR using the plugin submission template

    **4. Plugin Structure**
    Explain the required directory layout:
    ```
    plugins/my-plugin/
    ├── .claude-plugin/
    │   └── plugin.json       # Plugin manifest (required)
    ├── agents/               # Agent definitions (optional)
    │   └── my-plugin-*.md
    ├── commands/             # Command definitions (optional)
    │   └── *.md
    ├── CLAUDE.md             # Development guidance (recommended)
    ├── README.md             # Documentation (recommended, 50+ lines)
    ├── CHANGELOG.md          # Version history (recommended)
    └── VERSION               # Version file (recommended)
    ```

    **5. Plugin Manifest (plugin.json)**
    Document all fields from the schema:
    - Required: `name` (lowercase-hyphenated, `^[a-z][a-z0-9-]*$`)
    - Recommended: `version`, `description`, `author`, `homepage`, `repository`, `license`, `keywords`
    - Artifact declarations: `commands`, `agents`, `skills`, `hooks`
    - Note: All artifact paths must start with `./` and point to existing files

    **6. Naming Conventions**
    - Plugin name: lowercase letters, digits, hyphens (e.g., `my-plugin`)
    - Agent files: prefix with plugin name (e.g., `my-plugin-analyzer.md`)
    - Commands: placed in `./commands/` directory
    - Version: semantic versioning (e.g., `1.0.0`)

    **7. Quality Scoring**
    - Link to QUALITY.md for the full rubric
    - Explain the 5 categories (20 points each, 100 total)
    - Minimum threshold: currently informational (>= 60 is the future gate)
    - Mention that `1.0.0` avoids a 2-point pre-1.0 deduction
    - Mention that empty artifact directories incur a 2-point deduction — do NOT create `skills/` or `hooks/` directories unless you have files to put in them
    - Run `./scripts/score-plugin.sh plugins/my-plugin` to see your score
    - Run `./scripts/score-plugin.sh plugins/my-plugin --json` for machine-readable output

    **8. Scaffolding Script**
    Document `./scripts/new-plugin.sh`:
    - Usage: `./scripts/new-plugin.sh <name> [--description "..."] [--author "..."]`
    - What it creates (full file list)
    - Name validation rules
    - Example with custom description/author

    **9. Local Validation**
    Document `./scripts/validate-local.sh`:
    - Usage: `./scripts/validate-local.sh plugins/<name>`
    - What it checks (schema validation + structural checks + quality score)
    - Always run before submitting a PR

    **10. Submitting a PR**
    - Use the plugin submission PR template
    - Fill in all checklist items
    - CI will automatically run validation and post a quality score comment

    **11. CI Configuration Note** (important callout)
    Explain the `dorny/paths-filter` limitation:
    - After your plugin is merged, a maintainer must add a filter entry in `.github/workflows/validate-plugins.yml`
    - Show the exact YAML to add:
      ```yaml
      my-plugin:
        - 'plugins/my-plugin/**'
      ```
    - Without this entry, future changes to your plugin will not trigger CI validation

    **12. Adding Skills (Optional)**
    - Skills are optional — only add a `skills/` directory if you have skill files
    - Declare skills in plugin.json under the `skills` field
    - DO NOT create empty `skills/` directories (incurs quality deduction)

    **13. Adding Hooks (Optional)**
    - Hooks can be declared inline in plugin.json or as separate files
    - Hook scripts must be executable (`chmod +x`)
    - See the plugin schema for supported hook events

    **14. Getting Help**
    - Open an issue using the Plugin Request template
    - Check existing plugins (GRD, multi-cli-harness) for examples
    - Read QUALITY.md for scoring details

    IMPORTANT: All script paths and file references must be accurate. Do not reference files that do not exist. Use relative paths from the repository root throughout.
  </action>
  <verify>
    Verify line count: `wc -l CONTRIBUTING.md` >= 100 lines. (Level 1: Sanity)
    Verify key references exist:
    ```bash
    grep -q "new-plugin.sh" CONTRIBUTING.md
    grep -q "validate-local.sh" CONTRIBUTING.md
    grep -q "validate-plugins.yml" CONTRIBUTING.md
    grep -q "QUALITY.md" CONTRIBUTING.md
    grep -q "score-plugin.sh" CONTRIBUTING.md
    grep -q "dorny/paths-filter" CONTRIBUTING.md
    ```
    (Level 1: Sanity)
    Verify no broken references: all mentioned scripts exist in scripts/ directory.
    Verify no regression: `./scripts/run-fixture-tests.sh` still passes. (Level 1: Sanity)
  </verify>
  <done>CONTRIBUTING.md exists with >= 100 lines, covers the full onboarding flow from prerequisites through PR submission, references all Phase 4 tools by correct name/path, and documents the CI filter update requirement.</done>
</task>

</tasks>

<verification>
Level 1 (Sanity):
- CONTRIBUTING.md exists and has >= 100 lines
- All referenced scripts exist (new-plugin.sh, validate-local.sh, validate-plugin.sh, score-plugin.sh)
- Key documentation references are present (QUALITY.md, validate-plugins.yml)
- run-fixture-tests.sh still passes

Level 2 (Proxy):
- A reader can follow the Quick Start section end-to-end without errors
- Directory structure diagram matches actual template output
- CI filter YAML example is syntactically correct
</verification>

<success_criteria>
- CONTRIBUTING.md is the single source of truth for plugin onboarding
- A new contributor can follow the guide from zero to submitted PR in < 10 minutes
- All script references, file paths, and examples are accurate
- Quality scoring is explained with tips for maximizing score
- CI filter limitation is prominently documented
- No existing tests or functionality is broken
</success_criteria>

<output>
After completion, create `.planning/phases/04-onboarding-automation/04-04-SUMMARY.md`
</output>
